---
title: 事件冒泡和事件捕获
date: 2023-01-14
tags:
 - interview
categories:
 - interview
---
## 事件冒泡
```html
<!-- 事件会从最内层的元素开始发生，一直向上传播，直到document对象。 -->
<style>
    #parent {
        width: 200px;
        height: 200px;
        border: 1px black solid;
        position: relative;
        margin: 0 auto;
        cursor: pointer;
    }

    #child {
        width: 100px;
        height: 100px;
        border: 1px skyblue solid;
        position: absolute;
        top: 25%;
        left: 25%;
        cursor: pointer;
    }
</style>

<body>
    <div id="parent">
        <div id="child"></div>
    </div>
</body>

</html>
<script>
    document.getElementById("parent").addEventListener('click', function (e) {
        console.log('parent事件被触发：' + this.id)
    })

    document.getElementById("child").addEventListener('click', function (e) {
        console.log('child事件被触发：' + this.id)
    })
</script>

运行结果：
  点击parent：
    parent事件被触发：parent
  点击child：
    child事件被触发：child
    parent事件被触发：parent  
```

## 事件捕获
```html
<!-- 与事件冒泡相反，事件会从最外层开始发生，直到最具体的元素。 -->
<style>
    #parent {
        width: 200px;
        height: 200px;
        border: 1px black solid;
        position: relative;
        margin: 0 auto;
        cursor: pointer;
    }

    #child {
        width: 100px;
        height: 100px;
        border: 1px skyblue solid;
        position: absolute;
        top: 25%;
        left: 25%;
        cursor: pointer;
    }
</style>

<body>
    <div id="parent">
        <div id="child"></div>
    </div>
</body>

</html>
<script>
    document.getElementById("parent").addEventListener('click', function (e) {
        console.log('parent事件被触发：' + this.id)
    }, true)

    document.getElementById("child").addEventListener('click', function (e) {
        console.log('child事件被触发：' + this.id)
    }, true)
</script>  

运行结果：
  点击parent：
    parent事件被触发：parent
  点击child：
    parent事件被触发：parent
    child事件被触发：child
```

## addEventListener方法
```js
// 第一个参数是需要绑定的事件，第二个参数是触发事件后要执行的函数。
// 第三个参数默认值是false，表示在事件冒泡的阶段调用事件处理函数,如果参数为true，则表示在事件捕获阶段调用处理函数。

语法：
  element.addEventListener(event, function, useCapture)
```
