---
title: Promise-Async-Await
date: 2022-12-12
tags:
 - ECMASript
---

### Promise
```
ES6 对 Promise 有了原生的支持，一个 Promise 是一个等待被异步执行的对象，
当它执行完成后，其状态会变成 resolved 或者rejected

Promise 异步操作有三种状态：
	pending（进行中）
	resolve（已成功）
	reject（已失败）

除了异步操作的结果，任何其他操作都无法改变这个状态

当状态一旦改变后，那么结果就确定是成功还是失败了，所以状态就不会再次改变
```

### then方法
```js
  then 方法接收两个函数作为参数
    第一个参数是 Promise 执行成功时的回调
    第二个参数是 Promise 执行失败时的回调
  两个函数只会有一个被调用
```

### async修饰符
```
异步请求操作
```

### await修饰符
```js
  //先让函数变成异步函数
  async function request() {
      //给一个状态用于下面的判断
      var IsLogin = true

      //创建异步的状态对象
      var axios = new Promise((resolve, reject) => {
          if (IsLogin) {
              //设置异步为成功状态
              resolve({ result: true, msg: '登录成功' })
          } else {
              //设置异步为失败状态
              reject({ result: false, msg: '登录失败' })
          }
      })

      //异步的方式 不需要等待 会继续往后执行
      // axios.then(
      //     (success) => console.log(success),
      //     (error) => console.log(error)
      // )

      //同步的方式  必须要等await拿到结果之后，才可以往后走
      var result = await axios;
      console.log(result)

      console.log('hello world')
  }

  request()
```
