---
title: Set和Map
date: 2022-12-09
tags:
 - ECMASript
---

## Set
```
ES6 提供了新的数据结构 Set（集合）。
它类似于数组，但成员的值都是唯一的，可以进行遍历。
集合的属性和方法：
  1) size 返回集合的元素个数
  2) add 增加一个新元素，返回当前集合
  3) delete 删除元素，返回 boolean 值
  4) has 检测集合中是否包含某个元素，返回 boolean 值
  5) clear 清空集合，返回 undefined
```

#### 代码
```js
  //创建一个空集合
  let s = new Set() //Set(0) {size: 0}

  //创建一个非空集合
  let s1 = new Set([1, 2, 3, 1, 2, 3]) //Set(3) {1, 2, 3}

//集合属性与方法

  //返回集合的元素个数
  console.log(s1.size) //3
  //添加新元素
  console.log(s1.add(4)) //Set(4) {1, 2, 3, 4}
  console.log(s1.add({ a: 1, b:2 })) //Set(4) {1, 2, 3, {...}}
  //删除元素
  console.log(s1.delete(1)) // true
  //检测是否存在某个值
  console.log(s1.has(2)) // true
  //清空集合
  console.log(s1.clear()) // undefined

  // 去重
  let s1 = new Set([1, 2, 2, 3, 4, 4])
  console.log([...s1]) // [1, 2, 3, 4]

  // 并集
  let a = new Set([1, 2, 3])
  let b = new Set([2, 3, 4])
  let union = new Set([...a, ...b])
  console.log([...union]) // [1, 2, 3, 4]

  // 交集
  let a = new Set([1, 2, 3])
  let b = new Set([2, 3, 4])
  let intersect = new Set([...a].filter(x => b.has(x)))
  console.log([...intersect]) // [2, 3]

  // 差集
  let a = new Set([1, 2, 3])
  let b = new Set([2, 3, 4])
  let different = new Set([...a].filter(x => !b.has(x)))
  console.log([...different]) // [1]
```

## Map
```
ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合。
但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。
Map 是一组键值对的结构，可以进行遍历，具有极快的查找速度。
Map 的属性和方法：
  1) size 返回 Map 的元素个数
  2) set 增加一个新元素，返回当前 Map
  3) get 返回键名对象的键值
  4) has 检测 Map 中是否包含某个元素，返回 boolean 值
  5) clear 清空集合，返回 undefined
```

#### 代码
```js
  //创建一个空 map
  let m = new Map() //Map(0) {size: 0}

  //创建一个非空 map
  let m2 = new Map([
      ['name', 'zhangsan'],
      ['age', 18]
  ]) //{'name' => 'zhangsan', 'age' => 18}

//属性和方法
  //获取映射元素的个数
  console.log(m2.size) //2
  //添加映射值
  console.log(m2.set('friend', 'lisi')) //{'name' => 'zhangsan', 'age' => 18, 'friend' => 'lisi'}
  //获取映射值
  console.log(m2.get('age')) // 18
  //检测是否有该映射
  console.log(m2.has('age')) // true
  //清除
  console.log(m2.clear()) // undefined

  //循环遍历
  // for(var value of map.values()) //只循环value值
  // for(var key of map.keys())  //只循环key值
  for (var [key, value] of m2.entries()) { //返回键值对
      console.log(key, '``````', value)
  }

  //Map转换为数组
  var arr = Array.from(m2)
  console.log(arr) // [Array(2), Array(2)]

  //数组转化为Map
  var map = new Map(arr)
  console.log(map) // {'name' => 'zhangsan', 'age' => 18}
```
